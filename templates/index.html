<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Baby-Foot Club</title>
  <link rel="manifest" href="/static/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="BabyFoot">
  <link rel="apple-touch-icon" href="/static/images/logo.svg">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='responsive-mobile.css') }}">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" crossorigin="anonymous">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous"></noscript>
  <style>
    body { background: #0a0a0a; color: #f5f5f5; margin: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }

    /* ── Fond type lobby ── */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(to right,  rgba(205,127,50,0.07) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(205,127,50,0.07) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }
    body::after {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, #cd7f32 30%, #ffd700 50%, #cd7f32 70%, transparent);
      z-index: 1001;
      pointer-events: none;
    }
    .bg-orb {
      position: fixed;
      border-radius: 50%;
      pointer-events: none;
      z-index: 0;
    }
    .bg-orb-1 {
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(205,127,50,0.35) 0%, transparent 70%);
      filter: blur(80px);
      top: -160px; left: -100px;
    }
    .bg-orb-2 {
      width: 380px; height: 380px;
      background: radial-gradient(circle, rgba(255,191,0,0.25) 0%, transparent 70%);
      filter: blur(70px);
      top: 30%; right: -80px;
    }
    .bg-orb-3 {
      width: 420px; height: 420px;
      background: radial-gradient(circle, rgba(184,115,51,0.3) 0%, transparent 70%);
      filter: blur(90px);
      bottom: -120px; left: 25%;
    }
    @media (max-width: 768px) {
      body { animation: none !important; }
      .bg-orb-1 { width: 260px; height: 260px; top: -80px; left: -60px; filter: blur(50px); }
      .bg-orb-2 { width: 200px; height: 200px; right: -50px; filter: blur(45px); }
      .bg-orb-3 { width: 230px; height: 230px; bottom: -60px; filter: blur(55px); }
      body::before { background-size: 30px 30px; }
      .hero-bg-animated, .glow-orb { display: none !important; }
    }

    /* Contenu au-dessus du fond */
    .nav, .hero, .features, section, footer { position: relative; z-index: 1; }

    .nav { position: sticky; top: 0; z-index: 100; background: rgba(10,10,10,0.95); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(205,127,50,0.15); }
    .nav-inner { display: flex; align-items: center; padding: 0 1.25rem; height: 60px; gap: 1rem; }
    .nav-brand { display: flex; align-items: center; gap: 0.6rem; text-decoration: none; color: inherit; }
    .nav-brand img { width: 32px; height: 32px; }
    .brand-text { font-weight: 700; font-size: 1rem; }
  </style>
</head>
<body class="no-fade">

<div class="bg-orb bg-orb-1" aria-hidden="true"></div>
<div class="bg-orb bg-orb-2" aria-hidden="true"></div>
<div class="bg-orb bg-orb-3" aria-hidden="true"></div>

<nav class="nav">
  <div class="nav-inner">
    <a href="/" class="nav-brand">
      <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="">
      <span class="brand-text">Baby-Foot Club</span>
    </a>
    <div class="nav-sep"></div>
    <div class="nav-links">
      <a href="/" class="nav-link active">Accueil</a>
      <a href="#features" class="nav-link">Fonctionnalités</a>
      <a href="/top" class="nav-link">Classement</a>
      <a href="/scores" class="nav-link">Scores</a>
    </div>
    <button class="burger" id="burger" onclick="toggleMenu()" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
    <div class="nav-right">
      <a href="/login" class="btn btn-primary" style="font-size:0.875rem;padding:8px 18px">Se connecter</a>
    </div>
  </div>
</nav>

<div class="mobile-menu" id="mobileMenu">
  <button class="mobile-menu-close" onclick="toggleMenu()">✕</button>
  <a href="/">Accueil</a>
  <a href="#features" onclick="toggleMenu()">Fonctionnalités</a>
  <a href="/top"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;display:inline-block;flex-shrink:0"><path d="M6 9H4a2 2 0 0 1-2-2V5h4"/><path d="M18 9h2a2 2 0 0 0 2-2V5h-4"/><path d="M8 21h8"/><path d="M12 17v4"/><path d="M6 5h12v8a6 6 0 0 1-12 0z"/></svg> Classement</a>
  <a href="/scores"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;display:inline-block;flex-shrink:0"><path d="M18 20V10M12 20V4M6 20v-6"/></svg> Scores</a>
  <a href="/login" style="background:rgba(205,127,50,0.15);border-color:rgba(205,127,50,0.4);color:var(--bronze);font-weight:700"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;display:inline-block;flex-shrink:0"><circle cx="7.5" cy="15.5" r="5.5"/><path d="m21 2-9.6 9.6M15.5 7.5l3 3L22 7l-3-3"/></svg> Se connecter</a>
  <a href="/register"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;display:inline-block;flex-shrink:0"><path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/></svg> Créer un compte</a>
  <button id="pwa-install-trigger" onclick="triggerPwaInstall()" style="display:none;width:100%;text-align:left;background:linear-gradient(135deg,rgba(205,127,50,0.15),rgba(205,127,50,0.05));border:1px solid rgba(205,127,50,0.4);color:#cd7f32;font-weight:700;font-size:1rem;padding:0.9rem 1.25rem;border-radius:10px;cursor:pointer;margin-top:0.5rem;font-family:inherit;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;display:inline-block;flex-shrink:0"><rect x="5" y="2" width="14" height="20" rx="2"/><path d="M9 13h6M12 10v6"/></svg> Installer l'app</button>
</div>

<div class="hero">
  <div class="hero-bg-animated">
    <div class="glow-orb orb-1"></div>
    <div class="glow-orb orb-2"></div>
    <div class="glow-orb orb-3"></div>
  </div>
  <div class="hero-inner">
    <div class="hero-eyebrow"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;display:inline-block;flex-shrink:0"><circle cx="12" cy="12" r="10"/><path d="M12 2a10 10 0 0 1 6.3 2.3L12 8 5.7 4.3A10 10 0 0 1 12 2z"/><path d="M21.7 6.3A10 10 0 0 1 22 12a10 10 0 0 1-3.3 7.4L16 12z"/><path d="M5.7 4.3 8 12l-5.7 3.7A10 10 0 0 1 2 12c0-2.2.7-4.2 1.9-5.9z"/><path d="m8 12 4 8 4-8"/></svg>&nbsp;Le baby-foot connecté</div>
    <h1 class="hero-title">
      Jouez.<br>
      <em class="gradient-shine" style="padding-bottom:0.15em">Progressez.</em>
    </h1>
    <p class="hero-body">
      Réservez votre créneau, suivez vos scores en direct et défiez vos camarades.
      Simple, accessible depuis votre téléphone.
    </p>
    <div class="hero-cta">
      <a href="/register" class="btn btn-primary btn-lg btn-shine">
        <span>Créer un compte</span>
        <svg width="18" height="18" viewBox="0 0 16 16" fill="none">
          <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </a>
      <a href="#features" class="btn btn-secondary btn-lg"><span>Comment ça marche ?</span></a>
    </div>
    <div class="hero-stats">
      <div class="stat-box">
        <div class="stat-value" id="stat-parties">—</div>
        <div class="stat-label">Parties jouées</div>
      </div>
      <div class="stat-divider"></div>
      <div class="stat-box">
        <div class="stat-value" id="stat-joueurs">—</div>
        <div class="stat-label">Joueurs actifs</div>
      </div>
      <div class="stat-divider"></div>
      <div class="stat-box">
        <div class="stat-value" id="stat-temps">—</div>
        <div class="stat-label">Temps moyen</div>
      </div>
    </div>
  </div>
</div>

<section class="features" id="features">
  <div class="container" style="text-align:center;margin-bottom:var(--space-xl)">
    <div class="section-eyebrow">Fonctionnalités</div>
    <h2 class="section-title">Tout ce qu'il faut pour bien jouer</h2>
    <p class="section-sub">En 3 étapes : réservez un créneau, formez vos équipes, et c'est parti !</p>
  </div>
  <div class="container">
    <div class="feat-grid">
      <div class="feat-cell">
        <div class="feat-icon"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="20" cy="22" r="13"/><path d="M20 15v7l4 3"/><path d="M13 4h14"/><path d="M20 4v5"/></svg></div>
        <h3>1. Réservez votre créneau</h3>
        <p>Choisissez simplement votre heure et votre durée (5, 10 ou 15 min). Le baby-foot est bloqué pour vous — personne ne peut vous prendre votre créneau.</p>
      </div>
      <div class="feat-cell">
        <div class="feat-icon"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="10" width="30" height="18" rx="3"/><path d="M20 10v18"/><circle cx="12" cy="19" r="4"/><path d="M28 15h4M28 19h4M28 23h4" stroke-width="1.5"/></svg></div>
        <h3>Scores en direct</h3>
        <p>Chaque but s'affiche instantanément sur tous les appareils. Vos amis peuvent suivre la partie depuis leur téléphone, en temps réel.</p>
      </div>
      <div class="feat-cell">
        <div class="feat-icon"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="8" width="32" height="22" rx="3"/><line x1="13" y1="8" x2="13" y2="30"/><line x1="27" y1="8" x2="27" y2="30"/><circle cx="20" cy="19" r="3"/><path d="M28 14c0-4-6-6-8-2"/></svg></div>
        <h3>Déverrouillage automatique</h3>
        <p>La balle se déverrouille automatiquement au début de votre créneau via l'Arduino. Pas de clé, pas de code — juste votre téléphone.</p>
      </div>
      <div class="feat-cell">
        <div class="feat-icon"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><line x1="6" y1="32" x2="34" y2="32"/><line x1="6" y1="8" x2="6" y2="32"/><polyline points="10,26 16,18 22,22 30,10"/><circle cx="30" cy="10" r="3"/></svg></div>
        <h3>Suivez votre progression</h3>
        <p>Après chaque partie, vos stats se mettent à jour. Buts marqués, victoires, moyenne de buts — tout est tracé pour vous.</p>
      </div>
      <div class="feat-cell">
        <div class="feat-icon"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="8" y="18" width="8" height="12" rx="1"/><rect x="16" y="10" width="8" height="20" rx="1"/><rect x="24" y="22" width="8" height="8" rx="1"/><path d="M6 30h28M6 34h28"/></svg></div>
        <h3>Classement du club</h3>
        <p>Voyez où vous en êtes parmi tous les joueurs. Le classement est mis à jour en temps réel après chaque partie — montrez qui domine le classement.</p>
      </div>
      <div class="feat-cell">
        <div class="feat-icon"><svg width="40" height="40" viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="10" cy="12" r="4"/><path d="M4 28c0-5 3-8 6-8s6 3 6 8"/><circle cx="30" cy="12" r="4"/><path d="M24 28c0-5 3-8 6-8s6 3 6 8"/><line x1="20" y1="19" x2="20" y2="21"/><circle cx="20" cy="20" r="2.5"/></svg></div>
        <h3>1v1 ou 2v2</h3>
        <p>Jouez en duel ou en équipe selon vos envies. Invitez vos partenaires depuis le lobby et c'est parti.</p>
      </div>
    </div>
  </div>
</section>

<section style="padding:4rem 0;text-align:center">
  <div class="container">
    <h2 style="font-size:2rem;font-weight:800;margin-bottom:1rem;color:var(--text-primary)">Vous êtes prêt à jouer ?</h2>
    <p style="color:var(--text-tertiary);margin-bottom:0.5rem;font-size:1.1rem">Créez votre compte pour accéder à toutes les fonctionnalités.</p>
    <p style="color:var(--text-tertiary);margin-bottom:2rem;font-size:0.9rem">Déjà un compte ? Connectez-vous ci-dessous.</p>
    <div style="display:flex;gap:1rem;justify-content:center;flex-wrap:wrap">
      <a href="/register" class="btn btn-primary btn-lg btn-shine"><span>Créer un compte</span></a>
      <a href="/login" class="btn btn-secondary btn-lg"><span>Se connecter</span></a>
    </div>
  </div>
</section>

<footer>© 2026 Baby-Foot Club — Tous droits réservés</footer>

<script>
function toggleMenu() {
  document.getElementById('burger').classList.toggle('open');
  document.getElementById('mobileMenu').classList.toggle('open');
  document.body.style.overflow = document.getElementById('mobileMenu').classList.contains('open') ? 'hidden' : '';
}

async function loadPublicStats() {
  const cached = sessionStorage.getItem('public_stats');
  if (cached) { try { applyStats(JSON.parse(cached)); return; } catch(e) {} }
  try {
    const res = await fetch('/api/public_stats');
    if (!res.ok) throw new Error();
    const data = await res.json();
    sessionStorage.setItem('public_stats', JSON.stringify(data));
    applyStats(data);
  } catch(e) {
    document.getElementById('stat-parties').textContent = '0';
    document.getElementById('stat-joueurs').textContent = '0';
    document.getElementById('stat-temps').textContent = '15min';
  }
}
function applyStats(data) {
  const g = data.total_games ?? 0;
  document.getElementById('stat-parties').textContent = g > 0 ? g + '+' : '0';
  document.getElementById('stat-joueurs').textContent = data.active_players ?? '0';
  document.getElementById('stat-temps').textContent = '15min';
}
loadPublicStats();
</script>

<script>
if (window.matchMedia('(min-width: 769px) and (pointer: fine)').matches) {
  ['animations.js', 'icons.js', 'global-animations.js'].forEach(function(src) {
    var s = document.createElement('script'); s.src = '/static/' + src; s.async = true; document.body.appendChild(s);
  });
}
</script>
<script src="/static/pwa.js" defer></script>
</body>
</html>
